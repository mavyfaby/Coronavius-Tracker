!function(){var e=null,t=null;const o="https://api.thevirustracker.com/free-api";if(localStorage){class t{set(e,t){localStorage.setItem(e,t)}get(e){return localStorage.getItem(e)}init(){null==this.get("isFirst")&&(this.set("layout-theme","dark"),this.set("color-theme","green"),this.set("meta-theme","dark"),this.set("isFirst",1))}}(e=new t).init()}const a={apiKey:"AIzaSyC9Egn3cHpw9jkVj1FRfXu7q7nQxf4p5MI",authDomain:"covid-19-tracker-9d70e.firebaseapp.com",databaseURL:"https://covid-19-tracker-9d70e.firebaseio.com",storageBucket:"covid-19-tracker-9d70e.appspot.com",messageSenderId:"181076139909"},r=CryptoJS.AES.decrypt("U2FsdGVkX19PpsYICH23QxgYRJF8OS8Fqm3JAGpWPuM=","RM").toString(CryptoJS.enc.Utf8),n=Dom7,s=new Framework7({root:"#app",name:"Worldwide Coronavirus Tracker",panel:{swipe:"left"},dialog:{autoFocus:!1}});let l=!0;{firebase.initializeApp(a);const e=firebase.database();firebase.auth().signInWithEmailAndPassword("maverickfabroa@gmail.com",r).catch(function(e){alert(e.code)}),firebase.auth().onAuthStateChanged(function(t){if(t){t.email;if(g.open(),l){const t=e.ref("site");t.once("value").then(function(e){const o=e.val().views+1;t.set({views:o,lastDateViewed:Date.now()})}),l=!1}}})}const i=new Vue({el:".view",data:{title:"Worldwide Coronavirus Data",report:{},result:{},gResult:{},offsetTop:0,colors:[{name:"Red"},{name:"Green"},{name:"Blue"},{name:"Pink"},{name:"Yellow"},{name:"Orange"},{name:"Purple"},{name:"Deep Purple"},{name:"Light Blue"},{name:"Teal"},{name:"Lime"},{name:"Deep Orange"},{name:"Gray"},{name:"Black"}],layoutTheme:localStorage?e.get("layout-theme"):"dark",colorTheme:localStorage?e.get("color-theme"):"green",metaTheme:localStorage?e.get("meta-theme"):"dark"},methods:{toggleSwipeStep:function(){s.sheetSwipeToStep.stepToggle()},isMobile:function(){const e=window.innerWidth;return e>=320&&e<=414},convert:function(e){let t,o,a=e.toLowerCase();for(let e=0;e<a.length;e++)if(" "==a.charAt(e))return o=(t=a.split(" "))[0]+t[1];return a},fn:function(e){if(null!=e)return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},showProgress:function(){s.progressbar.show()},hideProgress:function(){s.progressbar.hide()},scrollTo:function(e){const t=n("#"+e),o=window.innerHeight,a=i.offsetTop+t.offset().top+t.height()/2-o;i.offsetTop=a,n(".page-content").scrollTop(a,3e3)}},computed:{orderedData:function(){return delete this.report.stat,_.sortBy(this.report,"total_cases").reverse()}}}),c=s.sheet.create({el:".result-sheet",backdrop:!0,swipeToStep:!0,swipeToClose:!0}),u=s.sheet.create({el:".global-sheet",backdrop:!0,swipeToStep:!0,swipeToClose:!0}),h=(s.sheet.create({el:".about-sheet",backdrop:!0,swipeToClose:!0}),s.toast.create({text:"Country not found on list!",closeButton:!0})),p=s.toast.create({text:"Input must not be empty!",closeButton:!0}),d=s.toast.create({text:"Successfully shared!",closeButton:!0}),m=s.toast.create({text:"Sharing failed!",closeButton:!0}),g=s.toast.create({text:"Authenticated!",closeTimeout:3e3}),f=s.toggle.create({el:"#dark-mode"});let k=!0,y=!0;function S(e){i.report=e.countryitems[0],t&&(i.result=i.report[t]),k&&(s.dialog.close(),k=!1),y=!0,i.hideProgress()}function v(e,t){alert("Error loading data!"),k&&(s.dialog.close(),k=!1),i.hideProgress()}if(navigator.onLine)try{setInterval(function(){y&&(s.request.json(o,{countryTotals:"PH"},S,v),i.showProgress(),s.request.json(o,{global:"stats"},w,b),y=!1)},2e3)}catch(e){alert(e)}else s.dialog.alert("No internet connection!");function w(e){i.gResult=e.results[0]}function b(e,t){alert("Error: "+t)}function T(e,t){n(e).removeClass(t)}function C(t){T("#app","theme-dark"),T("#app","theme-light"),localStorage&&e.set("layout-theme",t),n("#app").addClass("theme-"+t)}function P(t){const o=n("#app").attr("class").match(/\bcolor-theme-\S+/g);try{if(null!==o&&o.length>0)for(let e=0;e<o.length;e++)n("#app").removeClass(o[e])}finally{localStorage&&e.set("color-theme",t),n("#app").addClass("color-theme-"+t)}}function x(t){const o=document.querySelector("meta[name=theme-color]");let a;a="dark"==t?"#202020":n(".color-theme-"+t).css("--f7-theme-color"),localStorage&&e.set("meta-theme",t),n(o).attr("content",a)}function B(e){if(e.length>0){let a=e.toUpperCase();const r=Object.keys(i.report).length;for(let e=1;e<=r;e++){let n=i.report[e];if(-1!==n.title.toUpperCase().indexOf(a))return t=e,o=n,i.result=o,void(i.isMobile()?i.scrollTo(n.code):c.open(!0));if(e>=r-1)return void h.open()}}else p.open();var o}n("#global-stats").click(function(){u.open(!0)}),f.on("change",function(){this.checked?(n("#app").addClass("theme-dark"),x("dark"),C("dark"),localStorage&&(e.set("layout-theme","dark"),e.set("meta-theme","dark"))):(n("#app").removeClass("theme-dark"),C("light"),localStorage&&(x(e.get("color-theme")),e.set("layout-theme","light"),e.set("meta-theme",e.get("color-theme"))))}),n(".selected-theme").on("change",function(){const t=this.value;P(t),localStorage&&"dark"!==e.get("layout-theme")&&x(t)}),n("#share").click(function(){navigator.share?navigator.share({title:i.title,text:"Get real-time data of the coronavirus disease in every country.",url:"https://mavyfaby.ml/projects/covid"}).then(function(){d.open()}).catch(function(){m.open()}):s.dialog.alert("Share feature doesn't support by this browser!")});try{P(i.colorTheme),C(i.layoutTheme),x(i.metaTheme),localStorage&&("dark"==e.get("layout-theme")?n("#dark-mode-input").prop({checked:!0}):n("#dark-mode-input").prop({checked:!1}))}finally{n(".view").animate({opacity:1}),navigator.onLine&&s.dialog.preloader("Getting Data")}n("#search-country").click(function(){s.dialog.prompt("Search Country",i.title,B)})}();